<!-- static/index.html (VERSIÓN FINAL Y LIMPIA) -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Tareas</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <style>
        html, body { background-color: #f5f5f5; }
        .completed .content { text-decoration: line-through; opacity: 0.6; }
        .is-hidden { display: none; }
        .navbar { position: sticky; top: 0; z-index: 30; }
        .fab { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; border-radius: 50%; z-index: 40; }
        #toast-container { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 100; }
        #spinner { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 200; }
    </style>
</head>
<body>
    <!-- CONTENEDOR DE AUTENTICACIÓN (Se mostrará u ocultará con JS) -->
    <div id="auth-container">
        <section class="hero is-fullheight">
            <div class="hero-body"><div class="container">
                <div class="columns is-centered"><div class="column is-5-tablet is-4-desktop is-3-widescreen">
                    <form id="login-form" class="box">
                        <h2 class="title has-text-centered">Iniciar Sesión</h2>
                        <div id="login-error" class="notification is-danger is-light is-hidden"></div>
                        <div class="field"><label class="label">Email</label><div class="control"><input class="input" type="email" id="login-email" required></div></div>
                        <div class="field"><label class="label">Contraseña</label><div class="control"><input class="input" type="password" id="login-password" required></div></div>
                        <button type="submit" class="button is-primary is-fullwidth">Entrar</button>
                        <p class="has-text-centered mt-4">¿No tienes cuenta? <a href="#" id="show-register">Regístrate</a></p>
                    </form>
                    <form id="register-form" class="box is-hidden">
                        <h2 class="title has-text-centered">Registro</h2>
                        <div id="register-error" class="notification is-danger is-light is-hidden"></div>
                        <div id="register-success" class="notification is-success is-light is-hidden"></div>
                        <div class="field"><label class="label">Email</label><div class="control"><input class="input" type="email" id="register-email" required></div></div>
                        <div class="field"><label class="label">Contraseña</label><div class="control"><input class="input" type="password" id="register-password" required></div></div>
                        <button type="submit" class="button is-success is-fullwidth">Crear Cuenta</button>
                        <p class="has-text-centered mt-4">¿Ya tienes cuenta? <a href="#" id="show-login">Inicia sesión</a></p>
                    </form>
                </div></div>
            </div></div>
        </section>
    </div>

    <!-- CONTENEDOR DE LA APLICACIÓN -->
    <div id="app-container" class="is-hidden">
        <nav class="navbar is-primary"><div class="navbar-brand"><a class="navbar-item has-text-weight-bold">Gestor de Tareas</a></div><div class="navbar-menu is-active"><div class="navbar-start"><p id="user-info" class="navbar-item"></p></div><div class="navbar-end"><div class="navbar-item"><button id="logout-button" class="button is-primary is-light">Cerrar Sesión</button></div></div></div></nav>
        <main class="section"><div class="container"><h2 class="title is-4">Mis Tareas</h2><div id="task-list"></div></div></main>
        <button id="add-task-fab" class="button is-large is-primary is-rounded fab"><span class="icon is-medium"><i class="fas fa-plus"></i></span></button>
    </div>

    <!-- MODALES -->
    <div id="task-modal" class="modal"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p id="task-modal-title" class="modal-card-title">Nueva Tarea</p><button class="delete"></button></header><section class="modal-card-body"><form id="task-form"><input type="hidden" id="task-id"><div class="field"><label class="label">Título</label><div class="control"><input class="input" type="text" id="titulo" required></div></div><div class="field"><label class="label">Descripción</label><div class="control"><textarea class="textarea" id="descripcion" required></textarea></div></div></form></section><footer class="modal-card-footer"><button id="save-task-button" class="button is-success">Guardar</button><button class="button button-close">Cancelar</button></footer></div></div>
    <div id="assign-modal" class="modal"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Gestionar Usuarios</p><button class="delete"></button></header><section class="modal-card-body"><div id="assignees-list"></div><hr><form id="assign-form"><div class="field"><label class="label">Añadir por Email</label><div class="control"><input class="input" type="email" id="assign-email" required></div></div><button type="submit" class="button is-link">Asignar</button></form></section></div></div>

    <!-- HELPERS DE UI -->
    <div id="toast-container"></div>
    <div id="spinner" class="is-hidden"><div class="button is-loading is-large is-primary is-inverted"></div></div>

    <script src="/static/script.js"></script>
</body>
</html>